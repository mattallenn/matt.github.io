<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Project Title | Matthew Allen Portfolio</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #121212;
    color: #E0E0E0;
    line-height: 1.6;
    padding: 1rem;
    max-width: 700px;
    margin: 0 auto;
  }
  a {
    color: #8AB4F8;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
  header {
    padding: 1rem 0;
    border-bottom: 1px solid #333;
    margin-bottom: 2rem;
    text-align: center;
  }
  h1 {
    color: #ffffff;
    font-size: 2rem;
  }
  h2 {
    color: #90CAF9;
    font-size: 1.5rem;
    margin-top: 2rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid #333;
    padding-bottom: 0.25rem;
  }
  img {
    width: 100%;
    max-width: 600px;
    border-radius: 8px;
    margin-bottom: 1rem;
    object-fit: cover;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  p {
    font-size: 1rem;
    color: #B0BEC5;
    margin-bottom: 2rem;
  }
  nav {
    margin-top: 2rem;
    text-align: center;
  }

</style>
</head>
<body>
  <header>
    <h1>Polaris: Cold-Gas Thruster System</h1>
  </header>
   <p>Disclaimer: This project is part of Purdue Orbital's GNC team. This is by no means a solo project, but rather a collaborative effort among many talented individuals. My specific contributions are detailed below.
   </p>
  <h2>Overview</h2>
  <img src="images/polaris-cad.jpg" alt="Polaris CAD Model" loading="lazy" />
  <p>
    Polaris is a cold-gas thruster system designed to actively stabilize the launchpad just before launch, ensuring the platform remains secure and steady during critical moments. The system is built around an RP2040-based microcontroller that controls relays and solenoids, powered by batteries, and continuously monitors environmental conditions through a network of sensors.

As the lead software engineer, I am responsible for developing and maintaining the control software that drives this system. My role involves integrating hardware, software, and electronics, as well as developing the control software.
  </p>

  <h2>Details</h2>
  <img src="images/hardware.png" alt="Polaris hardware" loading="lazy" />
  <p>
    The microcontroller interfaces with sensors such as the IMU and magnetometer, as well as with relays that control the air solenoids for the thrusters. The initial prototype is complete! We’re now engineering a flight-weight system that will be used on the mission. Current efforts include implementing the CAN bus protocol for communication with other subsystems, selecting a smaller microcontroller (with a push toward a custom PCB), and designing the wiring harness and power system. There are many design decisions in progress, and reliability is the top priority.
  </p>

  <img src="images/graph.png" alt="PID Tuning Graph" loading="lazy" />
  <p>
    Above is a ground test that was ran. The control program was executed, followed by a manual spin test of Polaris to observe its response. Highlighted portions represent manual spins. The sign convention used is as follows: positive indicates clockwise rotation, and negative indicates counter-clockwise rotation. Observed oscillations are due to the test unit swaying during the experiment.
  </p>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  
  <style>
      pre[class*="language-"] {
          background: #000000 !important;
          font-size: 13px !important;
          line-height: 1.4;
          border-radius: 8px;
          padding: 12px;
          overflow-x: auto;
      }
      code[class*="language-"] {
          background: transparent !important;
      }
  </style>
  
  <pre><code class="language-python">

# PID Loop
while True:
            
    try:
        # Loop through different headings
        cycle_headings()

        current_time = time.monotonic()  # Store monotonic time
        current_heading = get_current_heading()
        
        ## For data logging
        gyro_x, gyro_y, gyro_z = sensor.gyro or (999,999,999)
        
        # Compute with wraparound handling
        # This means 0 and 360 are treated the same.
        error = (setpoint - current_heading + 180) % 360 - 180
            
        # Compute delta T
        delta_time = current_time - last_time
        last_time = current_time

        # Compute Derivative
        ## check if logic
        derivative = (error - previous_error) / delta_time if delta_time > 0 else 0
        previous_error = error

        # Compute PID output
        output = (Kp * error) + (Kd * derivative)
  </code></pre>
  <p>
    The above code snippet showcases the core PID control loop used in Polaris. It continuously reads the current heading from the IMU, calculates the error relative to the desired setpoint, and computes the PID output to adjust thruster activation accordingly. This specific implementation is from a "Martian" test, which cycles between headings of 0°, 90°, 180°, and 270° to evaluate system response and tune PID parameters, as well as look cool!
  </p>

  <img src="images/schematic1.png" alt="Flight Prototype" loading="lazy" />
  <img src="images/schematic2.png" alt="Flight Prototype" loading="lazy" />
  <img src="images/schematic3.png" alt="Flight Prototype" loading="lazy" />
  <p>
    The wiring schematics for the different components are shown above. Key components include the RP2040 microcontroller, IMU, magnetometer, solenoid valves, relays, and power supply.
  </p>

  <nav>
    <a href="index.html">← Back to Portfolio</a>
  </nav>
</body>
</html>
